@model IEnumerable<Hotel_Reservations_Manager.Models.UsersModel>
<!DOCTYPE html>
@{
    ViewData["Title"] = "Потребители";
}
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Потребители</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="~/css/tablestyles.css" />
    <link rel="stylesheet" href="~/css/btnstyle.css" />
    <link rel="stylesheet" href="~/css/datatable.css" />
</head>
<body>
    @if (Model.Any())
    {
        <div class="table-main-wrapper">
            <div class="table-wrapper">
                <table class="fl-table display" id="usersTable">
                    <thead>
                        <tr>
                            <th>@Html.DisplayNameFor(model => model.Username)</th>
                            <th>@Html.DisplayNameFor(model => model.Password)</th>
                            <th>@Html.DisplayNameFor(model => model.Name)</th>
                            <th>@Html.DisplayNameFor(model => model.Surname)</th>
                            <th>@Html.DisplayNameFor(model => model.familyName)</th>
                            <th>@Html.DisplayNameFor(model => model.IDNumber)</th>
                            <th>@Html.DisplayNameFor(model => model.phoneNumber)</th>
                            <th>@Html.DisplayNameFor(model => model.Email)</th>
                            <th>@Html.DisplayNameFor(model => model.AppointmentDate)</th>
                            <th>@Html.DisplayNameFor(model => model.releaseDate)</th>
                            <th>@Html.DisplayNameFor(model => model.isActive)</th>
                            <th>Контрол</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                        <tr>
                            <td>@Html.DisplayFor(modelItem => item.Username)</td>
                            <td>@Html.DisplayFor(modelItem => item.Password)</td>
                            <td>@Html.DisplayFor(modelItem => item.Name)</td>
                            <td>@Html.DisplayFor(modelItem => item.Surname)</td>
                            <td>@Html.DisplayFor(modelItem => item.familyName)</td>
                            <td>@Html.DisplayFor(modelItem => item.IDNumber)</td>
                            <td>@Html.DisplayFor(modelItem => item.phoneNumber)</td>
                            <td>@Html.DisplayFor(modelItem => item.Email)</td>
                            <td>@Html.DisplayFor(modelItem => item.AppointmentDate)</td>
                            @if (item.releaseDate.Value.Year != 2000)
                            {
                                <td>@Html.DisplayFor(modelItem => item.releaseDate)</td>
                            }
                            else
                            {
                                <td>Няма</td>
                            }
                            <td>@Html.DisplayFor(modelItem => item.isActive)</td>
                            <td>
                                <a asp-action="Edit" asp-route-id="@item.ID"><i class="fa fa-pencil-square-o" aria-hidden="true" style="font-size:24px;"></i></a>
                                <form id="delform" method="post" asp-action="Delete" asp-route-id="@item.ID">
                                    <a asp-action="Delete" asp-route-id="@item.ID" onclick="DelFunc();"><i class="fa fa-trash-o" style="font-size:24px;color:red"></i></a>
                                </form>
                            </td>
                        </tr>
                        }
                    <tbody>
                </table>
            </div>
            <center><a asp-action="Create" class="crt-btn">Създай нов потребител</a></center>
        </div>
    }
    else
    {
        <center>
            <h2>Няма създадени потребители!</h2>
            <a asp-action="Create" class="crt-btn" style="color:white;">Създай нов потребител</a>
        </center>
    }
</body>
</html>
@section scripts
{
    <script src="~/js/datatables.js"></script>
    <script>$(document).ready
    (
        function ()
        {
            $('#usersTable').DataTable();
        }
    );
    function DelFunc()
    {
        event.preventDefault();
        if (confirm('Сигурни ли сте, че искате да премахнете потребителя?')) {
            $("#delform").submit();
        }
    }
    </script>
} 